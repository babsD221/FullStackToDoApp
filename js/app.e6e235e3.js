(function(){"use strict";var t={3920:function(t,e,s){var o=s(9963),n=s(6252);function a(t,e,s,o,a,i){const r=(0,n.up)("Header"),c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(r),(0,n.Wm)(c)],64)}const i={class:"w-full h-20 bg-[#640032] flex justify-center items-center"},r={class:"flex flex-row w-11/12 justify-between"},c=(0,n._)("h1",{class:"text-white text-3xl p-4"}," TODO App",-1),d=(0,n.Uk)("Logout");function l(t,e,s,o,a,l){const u=(0,n.up)("base-button");return(0,n.wg)(),(0,n.iD)("header",i,[(0,n._)("div",r,[c,l.isLoggedIn?((0,n.wg)(),(0,n.j4)(u,{key:0,class:"text-xl",onClick:e[0]||(e[0]=t=>this.$store.dispatch("logout"))},{default:(0,n.w5)((()=>[d])),_:1})):(0,n.kq)("",!0)])])}var u={name:"HeaderComponent",computed:{isLoggedIn:function(){return console.log(this.$store.getters["authentication/isAuthenticated"]),this.$store.getters["authentication/isAuthenticated"]}},methods:{}},p=s(3744);const m=(0,p.Z)(u,[["render",l]]);var k=m,h={name:"App",components:{Header:k}};const f=(0,p.Z)(h,[["render",a]]);var g=f;const w={class:"rounded-xl bg-red-50 p-4 my-8 mx-auto max-w-3xl"};function v(t,e){return(0,n.wg)(),(0,n.iD)("div",w,[(0,n.WI)(t.$slots,"default")])}const T={},b=(0,p.Z)(T,[["render",v]]);var x=b,_=s(3577);function y(t,e,s,o,a,i){return(0,n.wg)(),(0,n.iD)("button",{class:(0,_.C_)([s.mode,"btn text-white py-3 px-6 bg-[#3a0061] cursor-pointer"])},[(0,n.WI)(t.$slots,"default",{},void 0,!0)],2)}var A={props:["mode"]};const I=(0,p.Z)(A,[["render",y],["__scopeId","data-v-c9ac8592"]]);var S=I,C=s(3907),$=s(9669),j=s.n($);const D={"Content-type":"application/json",Accept:"application/json"},W=j().create({baseURL:"http://127.0.0.1:5000",headers:D});W.interceptors.response.use((t=>t),(async t=>{switch(t.response.status){case 401:Ot.dispatch("logout");break;case 404:break;default:break}return t.response}));var L={namespaced:!0,state(){return{tasks:[],completedTasks:[]}},getters:{tasks(t){return t.tasks},completedTasks(t){return t.completeTasks}},mutations:{pushToTasks(t,e){t.tasks.unshift(e)},setTasks(t,e){t.tasks=e.reverse()},setCompletedTasks(t,e){t.completeTasks=e},removeAllTasks(t){t.tasks=[]},removeTask(t,e){const s="/remove",o=t.tasks.findIndex((t=>t.id===e["id"]));t.tasks.splice(o,1);const n={Authorization:`Bearer: ${e["token"]}`,"Content-Type":"application/json"},a={id:e["id"]};W.post(s,a,{headers:n})},completeTask(t,e){const s=t.tasks.findIndex((t=>t.id===e["id"]));t.tasks[s]={description:t.tasks[s].description,completed:!0,id:e["id"]};const o="/complete",n={Authorization:`Bearer: ${e["token"]}`,"Content-Type":"application/json"},a={id:e["id"]};W.post(o,a,{headers:n})}},actions:{addTask(t,e){const s="/create";let o={description:e["description"],completed:e["completed"]};console.log(o.id);const n={Authorization:`Bearer: ${e["token"]}`,"Content-Type":"application/json"};W.post(s,o,{headers:n}).then((e=>{o={description:e.data["description"],completed:e.data["completed"],id:e.data["id"]},t.commit("pushToTasks",o)}))}}},O=(s(2801),s(2119));const U=t=>((0,n.dD)("data-v-52fbb832"),t=t(),(0,n.Cn)(),t),z={class:"flex flex-col justify-between text-center"},Z=U((()=>(0,n._)("label",{class:"text-xl",for:"email"},"E-Mail",-1))),M=U((()=>(0,n._)("label",{class:"text-xl",for:"password"},"Password",-1))),B={key:0,class:"text-red-700"};function H(t,e,s,a,i,r){const c=(0,n.up)("base-card"),d=(0,n.up)("base-button");return(0,n.wg)(),(0,n.iD)("form",{onSubmit:e[2]||(e[2]=(0,o.iM)(((...t)=>r.submitForm&&r.submitForm(...t)),["prevent"])),class:"m-4 rounded-xl p-4 flex flex-col",action:""},[(0,n._)("div",z,[(0,n.Wm)(c,{class:"flex gap-6 text-center flex-row"},{default:(0,n.w5)((()=>[Z,(0,n.wy)((0,n._)("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=t=>i.email=t)},null,512),[[o.nr,i.email,void 0,{trim:!0}]])])),_:1}),(0,n.Wm)(c,{class:"flex gap-6 text-center flex-row"},{default:(0,n.w5)((()=>[M,(0,n.wy)((0,n._)("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=t=>i.password=t)},null,512),[[o.nr,i.password,void 0,{trim:!0}]])])),_:1}),i.formIsValid?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("p",B," Please enter a valid email and password")),(0,n.Wm)(c,{class:"flex gap-1 text-center flex-row"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{type:"submit"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,_.zw)(r.submitButtonCaption),1)])),_:1}),(0,n.Wm)(d,{type:"button",onClick:r.SwithAuthMode,mode:"flat"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,_.zw)(r.SwitchModeButtonCaption),1)])),_:1},8,["onClick"])])),_:1})])],32)}s(6699);var P={data(){return{email:"",password:"",formIsValid:!0,mode:"login",error:null}},computed:{submitButtonCaption(){return"login"===this.mode?"Login":"SignUp"},SwitchModeButtonCaption(){return"login"===this.mode?"SignUp instead":"Login instead"}},methods:{submitForm(){if(""===this.email||!this.email.includes("@")||this.password.length<6)return void(this.formIsValid=!1);const t={email:this.email,password:this.password};try{if("signup"==this.mode)this.$store.dispatch("authentication/signup",t),this.$router.push("/");else{if(this.$store.dispatch("authentication/authenticate",t),!this.$store.getters["authentication/isAuthorized"])return void(this.formIsValid=!1);this.$router.push("/tasks")}}catch(e){this.error=e.message}},SwithAuthMode(){"login"===this.mode?this.mode="signup":this.mode="login"}}};const J=(0,p.Z)(P,[["render",H],["__scopeId","data-v-52fbb832"]]);var V=J;const Y=(0,n.Uk)("All"),F=(0,n.Uk)("Active"),K=(0,n.Uk)("Done");function N(t,e,s,o,a,i){const r=(0,n.up)("AddTask"),c=(0,n.up)("base-button"),d=(0,n.up)("base-card");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(r),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{onClick:e[0]||(e[0]=t=>i.showStoredTasks()),mode:i.addTaskButtonMode},{default:(0,n.w5)((()=>[Y])),_:1},8,["mode"]),(0,n.Wm)(c,{onClick:e[1]||(e[1]=t=>i.setSelectedTab("ActiveTasks"))},{default:(0,n.w5)((()=>[F])),_:1}),(0,n.Wm)(c,{onClick:e[2]||(e[2]=t=>i.setSelectedTab("Completed"))},{default:(0,n.w5)((()=>[K])),_:1})])),_:1}),((0,n.wg)(),(0,n.j4)((0,n.LL)(a.selectedTab),{onToParent:t.childStoredTasks},null,40,["onToParent"]))],64)}const q={class:"p-0 m-auto max-w-md"};function E(t,e,s,o,a,i){const r=(0,n.up)("Task");return(0,n.wg)(),(0,n.iD)("ul",q,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.tasks,(t=>((0,n.wg)(),(0,n.j4)(r,{class:(0,_.C_)({completed:t.completed}),key:t.id,id:t.id,description:t.description},null,8,["class","id","description"])))),128))])}const R={class:"m-auto"},G={class:"flex justify-between flex-row"},Q={class:"text-xl text-left my-2 mx-0"},X={class:"flex flex-row justify-self-start space-x-0"};function tt(t,e,s,o,a,i){const r=(0,n.up)("done-icon"),c=(0,n.up)("base-button"),d=(0,n.up)("delete-icon"),l=(0,n.up)("base-card");return(0,n.wg)(),(0,n.iD)("li",R,[(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[(0,n._)("div",G,[(0,n._)("div",null,[(0,n._)("h3",Q,(0,_.zw)(s.description),1)]),(0,n._)("div",X,[(0,n.Wm)(c,{onClick:e[0]||(e[0]=t=>i.completeTask(s.id)),mode:"flat"},{default:(0,n.w5)((()=>[(0,n.Wm)(r)])),_:1}),(0,n.Wm)(c,{onClick:e[1]||(e[1]=t=>i.removeTask(s.id)),mode:"flat"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"text-red-700"})])),_:1})])])])),_:1})])}var et={name:"MyTask",props:["id","description"],data(){return{}},methods:{removeTask(t){const e={id:t,token:localStorage.getItem("token")};this.$store.commit("tasksList/removeTask",e)},completeTask(t){const e={id:t,token:localStorage.getItem("token")};this.$store.commit("tasksList/completeTask",e)}}};const st=(0,p.Z)(et,[["render",tt],["__scopeId","data-v-4961693c"]]);var ot=st,nt={name:"StoredTasks",components:{Task:ot},created(){this.$store.commit("tasksList/removeAllTasks"),this.getTasks()},computed:{tasks:function(){return this.$store.getters["tasksList/tasks"]}},methods:{getTasks(){this.$store.dispatch("getTasks"),setTimeout((()=>this.$store.dispatch("getTasks")),300)}}};const at=(0,p.Z)(nt,[["render",E],["__scopeId","data-v-3e3cfa30"]]);var it=at;const rt=t=>((0,n.dD)("data-v-5c0b63d0"),t=t(),(0,n.Cn)(),t),ct={class:"flex flex-row justify-between items-center"},dt=rt((()=>(0,n._)("label",{class:"font-bold block mb-2 text-xl",for:"description"},"Description",-1))),lt={class:"block w-2/3",id:"description",name:"description",ref:"taskInput",type:"text"},ut=(0,n.Uk)("Add Task");function pt(t,e,s,a,i,r){const c=(0,n.up)("base-button"),d=(0,n.up)("base-card");return(0,n.wg)(),(0,n.j4)(d,null,{default:(0,n.w5)((()=>[(0,n._)("form",{onSubmit:e[0]||(e[0]=(0,o.iM)((t=>r.submitTask(this.$refs.taskInput.value)),["prevent"])),action:""},[(0,n._)("div",ct,[dt,(0,n._)("input",lt,null,512),(0,n.Wm)(c,{type:"submit"},{default:(0,n.w5)((()=>[ut])),_:1})])],32)])),_:1})}var mt={methods:{submitTask(t){const e={id:this.$store.getters["tasksList/tasks"].length,description:t,completed:!1,token:localStorage.getItem("token")};this.$store.dispatch("tasksList/addTask",e)}}};const kt=(0,p.Z)(mt,[["render",pt],["__scopeId","data-v-5c0b63d0"]]);var ht=kt;const ft={class:"p-0 m-auto max-w-md"};function gt(t,e,s,o,a,i){const r=(0,n.up)("Task");return(0,n.wg)(),(0,n.iD)("ul",ft,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.tasks,(t=>((0,n.wg)(),(0,n.j4)(r,{class:(0,_.C_)({completed:t.completed}),key:t.id,id:t.id,description:t.description},null,8,["class","id","description"])))),128))])}var wt={name:"CompletedTask",components:{Task:ot},computed:{tasks:function(){let t=this.$store.getters["tasksList/tasks"].filter((t=>1==t.completed));return t}},mounted(){}};const vt=(0,p.Z)(wt,[["render",gt],["__scopeId","data-v-1f2bccfc"]]);var Tt=vt;const bt={class:"p-0 m-auto max-w-md"};function xt(t,e,s,o,a,i){const r=(0,n.up)("Task");return(0,n.wg)(),(0,n.iD)("ul",bt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.tasks,(t=>((0,n.wg)(),(0,n.j4)(r,{class:(0,_.C_)({completed:t.completed}),key:t.id,id:t.id,description:t.description},null,8,["class","id","description"])))),128))])}var _t={name:"ActiveTasks",components:{Task:ot},computed:{tasks:function(){let t=this.$store.getters["tasksList/tasks"].filter((t=>0==t.completed));return t}}};const yt=(0,p.Z)(_t,[["render",xt]]);var At=yt,It={components:{StoredTasks:it,AddTask:ht,Completed:Tt,ActiveTasks:At},data(){return{selectedTab:"StoredTasks",tasks:[]}},methods:{setSelectedTab(t){this.selectedTab=t},getTasks(){this.$store.dispatch("getTasks")},showStoredTasks(){this.setSelectedTab("StoredTasks"),this.getTasks()}},computed:{addTaskButtonMode(){return"StoredTasks"===this.selectedTab?null:"flat"}}};const St=(0,p.Z)(It,[["render",N]]);var Ct=St;const $t=(0,O.p7)({history:(0,O.PO)(),routes:[{path:"/",component:V},{path:"/tasks",component:Ct}]});var jt=$t;function Dt(t){if(console.log("in verification"),console.log(t),!t||t.split(".").length<3)return!1;const e=JSON.parse(atob(t.split(".")[1])),s=new Date(1e3*e.exp),o=new Date;return o<s}var Wt={namespaced:!0,state(){return{isAuthenticated:!1,isAuthorized:!1}},actions:{signup(t,e){let s="/register";const o=JSON.stringify(e);W.post(s,o).then((t=>{console.log(t)})).catch((t=>{console.log(t)})),t.commit("setUserData",{payload:e}),jt.push("/")},authenticate(t,e){let s="/login";const o=JSON.stringify(e);W.post(s,o).then((e=>{console.log(e),"message"in e.data?t.commit("setIsAuthorized",!1):(t.commit("setIsAuthorized",!1),t.commit("setJwtToken",e.data["token"]),t.commit("setUserData",e.data["id"]),t.commit("setIsAuthenticate"))}))},logout(t){let e="/logout",s={};W.post(e,s).then((e=>{t.commit("setJwtToken",e.data["token"]),t.commit("setIsAuthenticate")}))}},mutations:{setUserData(t,e){localStorage.userId=e},setIsAuthenticate(t){Dt(localStorage.getItem("token"))?t.isAuthenticated=!0:t.isAuthenticated=!1},setJwtToken(t,e){localStorage.token=e,console.log(localStorage.getItem("token"))},setIsAuthorized(t,e){t.isAuthorized=e}},getters:{userId(t){return t.userId},token(t){return t.token},isAuthenticated(t){return console.log(t),t.isAuthenticated},isAuthorized(t){return t.isAuthorized}}};const Lt=(0,C.MT)({modules:{tasksList:L,authentication:Wt},actions:{getTasks(t){const e="/",s={Authorization:`Bearer: ${localStorage.getItem("token")}`,"Content-Type":"application/json",User_Id:localStorage.getItem("userId")};W.get(e,{headers:s}).then((e=>{t.commit("tasksList/setTasks",e.data)})).catch((t=>{console.error(t)}))},logout(t){t.dispatch("authentication/logout"),t.commit("tasksList/removeAllTasks"),jt.push("/")}}});var Ot=Lt,Ut=s(20),zt=s(158);const Zt=(0,o.ri)(g);Zt.component("base-card",x),Zt.component("base-button",S),Zt.use(Ot),Zt.component("delete-icon",Ut.Z),Zt.component("done-icon",zt.Z),Zt.use(jt),Zt.mount("#app")}},e={};function s(o){var n=e[o];if(void 0!==n)return n.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,s),a.exports}s.m=t,function(){var t=[];s.O=function(e,o,n,a){if(!o){var i=1/0;for(l=0;l<t.length;l++){o=t[l][0],n=t[l][1],a=t[l][2];for(var r=!0,c=0;c<o.length;c++)(!1&a||i>=a)&&Object.keys(s.O).every((function(t){return s.O[t](o[c])}))?o.splice(c--,1):(r=!1,a<i&&(i=a));if(r){t.splice(l--,1);var d=n();void 0!==d&&(e=d)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[o,n,a]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,a,i=o[0],r=o[1],c=o[2],d=0;if(i.some((function(e){return 0!==t[e]}))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(c)var l=c(s)}for(e&&e(o);d<i.length;d++)a=i[d],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(l)},o=self["webpackChunkfront"]=self["webpackChunkfront"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(3920)}));o=s.O(o)})();
//# sourceMappingURL=app.e6e235e3.js.map